@page "/contact"
@page "/contact-us"

<div class="row">
    <div class="col">
        <h3>Contact Us Form</h3>
    </div>
</div>
<div class="row">
    <div class="col">
        <form>
            <div class="form-row">
                <div class="form-group col-sm-12 col-md-4">
                    <div class="form-check form-check-inline">
                        <label for="reply-method">Prefered way we can get back in touch with you</label>
                        <select @bind="TypeOfReply" id="reply-method" class="form-control">
                            <option value="@ContactType.None">None</option>
                            <option value="@ContactType.Discord">Discord</option>
                            <option value="@ContactType.Twitter">Twitter</option>
                            <option value="@ContactType.Reddit">Reddit</option>
                            <option value="@ContactType.Email">Email</option>
                        </select>
                    </div>
                </div>
                <div class="form-group col-sm-12 col-md-8">
                    <div class="form-check form-check-inline">
                        <label for="reply-method-account">@TypeOfReply.ToString()</label>
                        <input type="text" @bind="ReplyAccount"/>
                    </div>
                </div>
            </div>
            <div class="form-row">

            </div>
        </form>
    </div>
</div>

@code {
    private ContactType TypeOfReply { get; set; } = ContactType.None;
    private string replyAccount;
    private string ReplyAccount { get => replyAccount; set { replyAccount = value; ValidateAccountInput(); } }

    private enum ContactType
    {
        None,
        Discord,
        Twitter,
        Reddit,
        Email
    }

    private void ValidateAccountInput()
    {

    }

    private void PostMessage()
    {
        var client = new RestClient("https://ptb.discordapp.com/api/");
        var request = new RestRequest(" webhooks/{id}", Method.POST);
        //request.AddUrlSegment("id", "559353796715741197/Ze8JCsimToSGktfBWJv1ctcy1PdBZoztHbXHkyApc0GgOhddAxG1hwg59z9iOsnJxl2l"); //Testing url
        request.AddUrlSegment("id", "628585959579189254/8wYxltxmkxBC1ieNeropKrCNMEIb96S57qYC9gHw07TnU1sw7IgfWmxc5W0Ojzo0DPSE");

        request.AddParameter("content", $"Hi team, just testing :)");
        request.AddParameter("username", "Hallowspeak.com Contact Message");

        client.ExecuteAsync(request, (a) => { });
    }
}
